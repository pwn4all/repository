***
### EUC-KR 환경에서 만들어진 TXT 파일을 UTF-8 환경에서 누락 라인 없이 정리하는 방법
***
#### EUC-KR 환경에서 만들어진 CSV 형태의 TXT 파일 포맷(구분자:Tab)
```
COLUMN1 COLUMN2 COLUMN3
구분-1  키워드-1  문자열-1이 입력되어 있다.
구분-2  키워드-2  문자열-2이 입력되어 있다.
구분-3  키워드-3  문자열-3이 입력되어 있다.
구분-4  키워드-4  문자열-4이 입력되어 있다.
구분-5  키워드-5  "문자열-5이 입력되어 있다."
구분-6  키워드-6  "문자열-6이 입력되어 있다."
구분-7  키워드-7  "문자열-7이 입력되어 있다."
구분-8  키워드-8  "문자열-8이 입력되어 있다."
구분-9  키워드-9  "문자열-9이 입력되어 있다."
```
#### iconv 로 인코딩 변경이 정확함
```
$ iconv -c -f EUC-KR -t UTF-8 texts.txt > texts.csv
```

#### 아래의 문제를 해결하기 위해서 vi 에서 꼬일 수 있는 " 를 제거한다.
```
$ vi texts.csv

# COLUMN2 다음 tab과 COLUMN3 이 " 로 시작하는 구성을 tab만 남도록 수정
:%s/\t"/\t/g
# COLUMN3 의 마지막에 있는 " 를 삭제해서 " 꼬임 상황 제거
:%s/"$//g
```


#### 문제점 : pandas 로 읽는 과정에서 COLUMN3 에 있는 글자가 " 이 꼬이면 vi 로 읽었을 때는 10줄이지만 pandas/엑셀/Numbers/CSV 편집기로 열면 아래와 같이 줄이 꼬여서 5줄보다 적은 줄로 파일이 오픈되는 상황이 발생할 수 있다.
```
구분-1  키워드-1  문자열-1이 입력되어 있다.
구분-2  키워드-2  문자열-2이 입력되어 있다.구분-3  키워드-3  문자열-3이 입력되어 있다.구분-4  키워드-4  문자열-4이 입력되어 있다.
구분-5  키워드-5  "문자열-5이 입력되어 있다.구분-6  키워드-6  "문자열-6이 입력되어 있다."구분-7  키워드-7  "문자열-7이 입력되어 있다."구분-8  키워드-8  "문자열-8이 입력되어 있다.""
구분-9  키워드-4  "문자열-9이 입력되어 있다."
```


#### <u>원인은 모르겠지만, csv 형태가 꼬인 상태로 txt 파일이 만들어져 있어서 편집기를 이용해서 수작업 처리해야 한다.</u>
#### 해결방법(Number나, CSV편집기에서 잘 보인다)
* 한 라인의 끝에 다음 라인이 붙은 경우 수작업으로 라인을 분리한다.
* Before
```
구분-2  키워드-2  문자열-2이 입력되어 있다.구분-3  키워드-3  문자열-3이 입력되어 있다.구분-4  키워드-4  문자열-4이 입력되어 있다.
```

* After
```
구분-2  키워드-2  문자열-2이 입력되어 있다.
구분-3  키워드-3  문자열-3이 입력되어 있다.
구분-4  키워드-4  문자열-4이 입력되어 있다.
```

* " 이 꼬여서 여러 줄이 한 라인으로 잘못 읽히는 경우
* Number 에서 보면 하나의 셀에 "여러 라인"으로 묶인 것을 볼 수 있고, 묶인 라인만큼 추가해서 붙여넣기 한다.
* Before
```
구분-5  키워드-5  "문자열-5이 입력되어 있다.구분-6  키워드-6  "문자열-6이 입력되어 있다."구분-7  키워드-7  "문자열-7이 입력되어 있다."구분-8  키워드-8  "문자열-8이 입력되어 있다.""
```

* After
```
구분-5  키워드-5  "문자열-5이 입력되어 있다.구분-6  키워드-6  "문자열-6이 입력되어 있다."구분-7  키워드-7  "문자열-7이 입력되어 있다."구분-8  키워드-8  "문자열-8이 입력되어 있다.""
```
